# ‚öôÔ∏è Backend --- –ú–∞–≥–∞–∑–∏–Ω —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–π —Ç–µ—Ö–Ω–∏–∫–∏

## üìå –û–ø–∏—Å–∞–Ω–∏–µ

–ë—ç–∫–µ–Ω–¥-—á–∞—Å—Ç—å —É—á–µ–±–Ω–æ–≥–æ fullstack-–ø—Ä–æ–µ–∫—Ç–∞ **¬´–ú–∞–≥–∞–∑–∏–Ω —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–π
—Ç–µ—Ö–Ω–∏–∫–∏¬ª**.\
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–∞ **Express + GraphQL Yoga** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **Prisma ORM**
–∏ **PostgreSQL**.\
–û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —Ä–∞–±–æ—Ç—É —Å —Ç–æ–≤–∞—Ä–∞–º–∏, –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏,
–∫–æ—Ä–∑–∏–Ω–æ–π –∏ –æ—Ç–∑—ã–≤–∞–º–∏.

## ‚ú® –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

-   üë§ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (**JWT**)
-   üì¶ CRUD –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
-   ‚≠ê –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–∞–º–∏
-   üõí –ö–æ—Ä–∑–∏–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
-   üìë –ê—Ç—Ä–∏–±—É—Ç—ã –∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤
-   üìä –ü–∞–≥–∏–Ω–∞—Ü–∏—è –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
-   üîê Middleware –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

-   **TypeScript 5.8**\
-   **Express 4.21**\
-   **GraphQL Yoga 5**\
-   **Prisma ORM**\
-   **PostgreSQL**\
-   **jsonwebtoken + bcryptjs**\
-   **Joi** (–≤–∞–ª–∏–¥–∞—Ü–∏—è)\
-   **dotenv, CORS**

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

‚ö†Ô∏è –î–ª—è —Ä–∞–±–æ—Ç—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö **PostgreSQL**.

``` bash
# –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π backend
git clone https://github.com/DieDice13/DiplomProjectV2-backend

# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –ø–∞–ø–∫—É
cd DiplomProjectV2-backend

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install
# –∏–ª–∏
pnpm install

# –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.example .env

# –ü—Ä–∏–º–µ–Ω—è–µ–º –º–∏–≥—Ä–∞—Ü–∏–∏
npx prisma migrate dev

# –ó–∞–ø–æ–ª–Ω—è–µ–º —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
npm run seed

# –ó–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–µ—Ä
npm run dev
```

## üîß –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–§–∞–π–ª `.env` –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å:

``` env
DATABASE_URL="postgresql://user:password@localhost:5432/dbname"
JWT_SECRET="your_secret_key"
PORT=4000
```

## üóÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

    ‚îú‚îÄ‚îÄ prisma/          # —Å—Ö–µ–º–∞ –∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
    ‚îú‚îÄ‚îÄ data/            # —Å–∏–¥—ã (–∫–∞—Ç–µ–≥–æ—Ä–∏–∏, —Ç–æ–≤–∞—Ä—ã, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
    ‚îú‚îÄ‚îÄ validation/      # —Å—Ö–µ–º—ã Joi
    ‚îú‚îÄ‚îÄ server.js        # —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
    ‚îú‚îÄ‚îÄ auth.js          # –ª–æ–≥–∏–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
    ‚îî‚îÄ‚îÄ package.json

## üì° –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### üîë –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

``` graphql
mutation {
  register(
    name: "Test User"
    email: "test@example.com"
    password: "123456"
  ) {
    token
    user {
      id
      name
      email
    }
  }
}
```

### üîë –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

``` graphql
mutation {
  login(email: "test@example.com", password: "123456") {
    token
    user {
      id
      name
      email
    }
  }
}
```

### üë§ –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

``` graphql
query {
  me {
    id
    name
    email
  }
}
```

### üì¶ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤

``` graphql
query {
  products(page: 1, pageSize: 10, categoryId: 2) {
    id
    name
    price
    category {
      id
      name
    }
  }
}
```

### ‚≠ê –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–∞

``` graphql
mutation {
  addReview(
    productId: 1
    rating: 5
    comment: "–û—Ç–ª–∏—á–Ω—ã–π —Ç–æ–≤–∞—Ä!"
  ) {
    id
    rating
    comment
    user {
      name
    }
  }
}
```

### üõí –†–∞–±–æ—Ç–∞ —Å –∫–æ—Ä–∑–∏–Ω–æ–π

``` graphql
mutation {
  addToCart(productId: 1, quantity: 2) {
    id
    quantity
    product {
      name
      price
    }
  }
}
```

## üîÆ –ü–ª–∞–Ω—ã –ø–æ —Ä–∞–∑–≤–∏—Ç–∏—é

-   üõ† –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞–º–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏\
-   üì¶ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–µ—Ä–≤–∏—Å–∞–º–∏ –¥–æ—Å—Ç–∞–≤–∫–∏\
-   üí≥ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –æ–Ω–ª–∞–π–Ω-–æ–ø–ª–∞—Ç—ã\
-   üìä –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –æ—Ç—á—ë—Ç—ã –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
